<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nouvelle Offre</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
    <div th:replace="fragments/header :: body"></div>

<div class="max-w-4xl mx-auto bg-white p-8 shadow rounded-xl">
    <h1 class="text-2xl font-bold text-indigo-700 mb-6">Créer une nouvelle offre</h1>

    <form th:action="@{/DSM/offres}" method="post">
        <!-- Infos de base -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
                <label class="block">Nom de l'offre</label>
                <input type="text" name="nom" required class="w-full border p-2 rounded">
            </div>
            <div>
                <label class="block">Description</label>
                <input type="text" name="description" required class="w-full border p-2 rounded">
            </div>
            <div>
                <label class="block">Colisage (produits par colis)</label>
                <input type="number" name="colisage" min="1" step="1" class="w-full border p-2 rounded">
            </div>
            <div>
                <label class="block">Date début</label>
                <input type="date" name="dateDebut" required class="w-full border p-2 rounded">
            </div>
            <div>
                <label class="block">Date fin</label>
                <input type="date" name="dateFin" required class="w-full border p-2 rounded">
            </div>
        </div>

        <h2 class="text-lg font-semibold mt-6 mb-2">Produits associés</h2>

        <table class="w-full border mb-6 text-sm">
            <thead class="bg-gray-200">
                <tr>
                    <th>Produit</th><th>Prix</th><th>Remise (%)</th><th>Quantité Min</th><th>Quantité Max</th><th>Colisage</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="produit, stat : ${produits}">
                    <td>
                        <input type="hidden" th:name="|produitIds|" th:value="${produit.id}">
                        <span th:text="${produit.nom}"></span>
                    </td>
                    <td><input type="number" step="0.01" th:name="|prix|" class="w-full border p-1" required></td>
                    <td><input type="number" step="0.01" th:name="|remise|" class="w-full border p-1" required></td>
                    <td><input type="number" th:name="|min|" class="w-full border p-1" required></td>
                    <td><input type="number" th:name="|max|" class="w-full border p-1" required></td>
                    <td><input type="number" th:name="|colisage|" class="w-full border p-1"></td>
                </tr>
            </tbody>
        </table>

        <div class="text-right">
            <button class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Enregistrer</button>
        </div>
    </form>
</div>
</body>
</html>
